# Create PR Command

**Automatically create PR with description based on git changes**

## 📋 Command Overview
Analyze current branch changes and generate Korean PR title and description automatically.

## 🔍 Analysis Steps

### 1. Git Changes Analysis
- Check modified files list
- Analyze commit messages
- Summarize code changes
- Identify feature additions/bug fixes

### 2. PR Description Generation
- Create comprehensive summary in Korean
- List major changes by file
- Provide testing guidelines
- Highlight review points
### 3. PR 생성
현재 브랜치에서 master로 PR 생성

### 4. 자동 코드 리뷰 (PR 생성 후에만 실행)

#### 4.1 PR 생성 확인
1. PR이 성공적으로 생성되었는지 확인
2. PR 번호 추출

#### 4.2 코드 리뷰 실행 (자동화 스크립트 사용)

**방법 1: 자동 라인별 리뷰 스크립트 (권장)**
```bash
# 라인별 자동 코드 리뷰 실행
./.github/scripts/line-by-line-review.sh {PR번호}
```

**방법 2: GitHub CLI 수동 리뷰**
1. `gh pr view {PR번호} --json files` - 변경된 파일 목록 확인
2. `gh pr diff {PR번호}` - 변경사항 확인
3. 수동으로 코드 분석 후 리뷰 작성

**방법 3: MCP GitHub 도구 (Enterprise 환경)**
1. `get_pull_request_files`로 변경된 파일 목록 확인
2. `create_pending_pull_request_review` 생성
3. `add_comment_to_pending_review`로 각 이슈별 코멘트 추가
4. `submit_pending_pull_request_review`로 **항상 COMMENT**로 제출
    - **중요**: 자신의 PR에는 APPROVE/REQUEST_CHANGES 불가능하므로 항상 COMMENT 사용

#### 4.3 코드 리뷰 내용
- 파일별 구체적인 라인에 코멘트
- 보안, 성능, 코드 품질, 테스트 관점 검토
- 각 코멘트에 클로드 서명 추가:
  ```
  🤖 Generated by [Claude Code](https://claude.ai/code)
  ```

#### 4.4 코멘트 우선순위
- 🔒 **보안 이슈**: 즉시 수정 필요
- ⚡ **성능 문제**: 수정 권장
- 🚧 **미완성 코드**: 완성 필요
- 🧪 **테스트 부족**: 테스트 추가 권장
- 💡 **개선 제안**: 선택적 개선

#### 4.5 변경 사항 분석
- `git diff`로 실제 변경사항 식별
- 신규 파일과 수정된 파일 구분
- 변경된 라인과 메서드만 집중 분석

#### 4.6 리뷰 출력 형식 (한국어)

```
## 규칙 준수 검토

### Architecture
- ✅/❌ 패키지 구조 규칙
- ✅/❌ 모듈 의존성 규칙

### Code Quality
- ✅/❌ 명명 규칙
- ✅/❌ Kotlin 컨벤션
- ✅/❌ 검증 로직 패턴

### Testing
- ✅/❌ 테스트 커버리지
- ✅/❌ 테스트 패턴

## 이슈 및 개선사항

### 🚨 CRITICAL (즉시 수정 필요)
- 보안 취약점
- 아키텍처 위반
- 데이터 무결성 문제

### ⚠️ HIGH (수정 권장)
- 성능 이슈
- 규칙 위반
- 잠재적 버그

### 💡 SUGGESTIONS (개선 제안)
- 코드 품질 개선
- 가독성 향상
- 리팩토링 기회

### 📝 ACTIONS (구체적 수정사항)
- 파일별 수정 필요 내용
- 코드 예시 포함
```

## 📤 Output Format (Korean)

Generate PR description in Korean following this structure:

```markdown
## 📋 요약
변경사항에 대한 간단한 요약을 한글로 작성

## 🔧 주요 변경사항
- 파일별 변경 내용을 한글로 설명
- 새로 추가된 기능들
- 수정된 로직 설명

## 🧪 테스트 방법
- 테스트 절차를 한글로 안내
- 확인해야 할 사항들
- 예상 결과

## 📝 리뷰 포인트
- 리뷰어가 중점적으로 확인해야 할 부분
- 특별한 주의사항이나 고려사항
- 아키텍처나 보안 관련 중요 사항
```

## 🎯 Usage
```bash
claude create-pr
```

## 📋 Requirements
- Must output all content in Korean
- Include commit message analysis
- Provide actionable review guidelines
- Focus on security and architecture aspects if applicable
